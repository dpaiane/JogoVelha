<!DOCTYPE html>
<html lang="pt">
<head>
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="~/CSS/style.css">
    
    <style>
        body {
            background-color: #803bad; 
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
        
        div {
            background-color: #fff8e1; 
            text-align: center;
            color: #333;
            border: 2px solid #333;
            border-radius: 15px;
            padding: 20px;
            width: 340px;
            margin-left: auto;
            margin-right: auto;
        }
        
        button {
            transition-duration: 0.4s;
            background-color: #fff8e1;
            width: 60px;
            height: 60px;
            border: 1px solid #000000;
            font-size: 20px;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #9a1ed473;
            color: white;
        }
        
        table {
            border-spacing: 0;
            margin: auto;
        }
        
        td {
            border-left: 2px solid #333;
            border-top: 2px solid #333;
        }
        
        .td_Direita {
            border-left: 0;
        }
        
        .td_top {
            border-top: 0;
        }
        
        #areaJS {
            position: relative;
            top: 50px;
            width: 340px;
            height: 70px;
            margin-left: auto;
            margin-right: auto;
        }
        
        #area {
            position: relative;
            top: 25px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }
    </style>

    <title>Jogo da Velha</title>
</head>

<body onselectstart="return false" oncontextmenu="return false">
    <div>
        <h2>Bem-vindo ao nosso Jogo da Velha</h2>
        <p id="data"></p>
    </div>

    <div id="area">
        <table>
            <tr>
                <td class="td_Direita td_top"><button id="1" value="1" onclick="jogar(1)"></button></td>
                <td class="td_top"><button id="2" value="2" onclick="jogar(2)"></button></td>
                <td class="td_top"><button id="3" value="3" onclick="jogar(3)"></button></td>
            </tr>
            <tr>
                <td class="td_Direita"><button id="4" value="4" onclick="jogar(4)"></button></td>
                <td><button id="5" value="5" onclick="jogar(5)"></button></td>
                <td><button id="6" value="6" onclick="jogar(6)"></button></td>
            </tr>
            <tr>
                <td class="td_Direita"><button id="7" value="7" onclick="jogar(7)"></button></td>
                <td><button id="8" value="8" onclick="jogar(8)"></button></td>
                <td><button id="9" value="9" onclick="jogar(9)"></button></td>
            </tr>
        </table>
        <button onclick="location.reload()">Reset</button>
    </div>

    <div id="areaJS" onclick="FuncaoAviso()">
        <p id="confirmacao">Faça sua jogada para começar o jogo!</p>


    <!-- Relacionar o arquivo de scripts JavaScript -->
    <script>
        const dt = new Date().toLocaleString();
        document.getElementById("data").innerHTML = dt;

        function FuncaoAviso() {
            alert('Este é apenas um painel de avisos!');
        }

        let tabuleiro = ["0", "0", "0", "0", "0", "0", "0", "0", "0"];
        let jogadas = 0;

        function jogar(bot) {
            if (jogadas < 9) {
                if (tabuleiro[bot - 1] == "0") {
                    document.getElementById(bot).innerHTML = "X";
                    tabuleiro[bot - 1] = "X";
                    jogadas++;

                    if (VerificaVitoria("X")) {
                        document.getElementById("data").innerHTML = "Você Ganhou!";
                        alert("Você Ganhou!");
                        return;
                    }

                    RoboJoga();
                    if (VerificaVitoria("O")) {
                        document.getElementById("data").innerHTML = "Você Perdeu!";
                        alert("Você Perdeu!");
                        return;
                    }
                } else {
                    alert("Escolha outra posição!");
                }
            } else {
                document.getElementById("data").innerHTML = "O jogo Empatou!";
                alert("O jogo empatou!");
            }
        }

        function VerificaVitoria(jogador) {
            const vitoriaCombinacoes = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6]
            ];

            return vitoriaCombinacoes.some(comb => 
                comb.every(index => tabuleiro[index] === jogador)
            );
        }

        function RoboJoga() {
            let val;
            do {
                val = Math.floor(Math.random() * 9); // Escolhe uma posição aleatória
            } while (tabuleiro[val] !== "0"); // Repete até achar uma posição livre

            document.getElementById(val + 1).innerHTML = "O";
            tabuleiro[val] = "O";
            jogadas++;

            if (VerificaVitoria("O")) {
                document.getElementById("data").innerHTML = "Você Perdeu!";
                alert("Você Perdeu!");
            }
        }
    </script>
</body>
</html>
